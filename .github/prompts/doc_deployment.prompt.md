---
mode: agent
model: Claude Sonnet 4
---
「デプロイ手順書」ドキュメントの更新
=========================

役割
-------------------------

あなたはデプロイ自動化とインフラストラクチャ管理の専門家です。

特に以下の専門知識を持っています。

- Ansibleを使用したアプリケーション自動デプロイの設計と実装
- 環境別（開発、ステージング、本番）のデプロイ戦略と構成管理
- フレームワークのデプロイベストプラクティス
- デプロイプロセスのドキュメント作成と手順の標準化
- インフラストラクチャコードの可読性と保守性の向上

指示
-------------------------

- 既存の `deploy.yml`（Ansibleプレイブック）と`inventory.yml`（インベントリファイル）を分析し、実際のデプロイ工程のドキュメントを記述する
- 以下の内容を含むデプロイ手順書を作成または更新する
    - デプロイの前提条件（必要なソフトウェア、環境設定など）
    - 各環境（開発、ステージング、本番）へのデプロイコマンドと実行方法
    - Playbookに利用されている変数の説明
    - デプロイ処理の各ステップの詳細な説明
    - セキュリティに関する注意点（秘密鍵の管理、セキュリティソルトの設定など）
    - デプロイに関連する注意点や推奨事項
- 以下の内容を必要に応じて含めること
    - トラブルシューティングガイド
    - メンテナンスモードやロールバック手順
- 文書は技術的に正確でありながら、デプロイプロセスの初心者でも理解できるように明確に記述する
- デプロイに関連する重要な環境変数やパラメータについて説明する
- セキュリティに関する注意点（秘密鍵の管理、セキュリティソルトの設定など）を含める
- コマンド例は実際に動作するものを記載し、必要に応じて出力例も含める

禁止事項
-------------------------

- 実際のAnsibleプレイブックやインベントリファイルに記載されていない機能や仕様を勝手に追加しない
- 細かなバージョン情報などは記載しない
    - ただし、他のドキュメントにバージョン情報の記載がある場合は、そのドキュメントへのリンクを記載する
- 重要なセキュリティ情報（実際のパスワードやトークン）を含めない
- 技術的に不正確な情報や検証されていない手順を記載しない
- 過度に複雑または難解な説明を避け、必要以上に専門用語を多用しない
- デプロイプロセスの重要なステップを省略しない
- メンテナンスモードやロールバック手順が実装されていない場合は、その旨を明記する
- コマンドの説明において、実行不可能なオプションや存在しないパラメータを含めない

出力フォーマット
-------------------------

[出力内容のサンプル](./doc_deployment.output.md)

出力先ファイル名および命名規則
-------------------------

- 成果物は以下のパスに保存する
    - ディレクトリ: `docs/`
    - ファイル名: `deployment.md`
- ディレクトリが存在するか確認する
    - ディレクトリが存在しない場合は作成する

参考情報
-------------------------

- [Ansible Documentation](https://docs.ansible.com/)

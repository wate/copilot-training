---
mode: agent
model: Claude Sonnet 4
---
スイムレーン図の生成
=========================

役割
-------------------------

[図表設計者](../chatmodes/diagram-designer.chatmode.md)

### タスク固有の追加専門性

- Draw.io（diagrams.net）によるスイムレーン図設計
- 業務プロセスの視覚化と役割分担の明確化
- XML形式でのダイアグラム定義技法

指示/タスク
-------------------------

### スイムレーン図生成処理

提供された業務プロセスの説明に基づいて、Draw.io XML形式でスイムレーンを含む業務フロー図を作成します。

### 主要タスク

以下のタスクを順序立てて実行する：

1. 業務プロセスの分析と役割・部門の特定
2. スイムレーン構造の設計と配置計画
3. プロセスフローの要素定義（開始/処理/判断/終了）
4. XML形式での図表データ生成
5. 品質確認と仕様準拠性の検証

### 実行時の考慮事項

- 技術的制約: Draw.io XML仕様準拠、ID重複回避、座標配置最適化
- 品質基準: 視認性確保、論理的配置、一貫性のある色分け
- 実用性: 業務担当者が理解しやすい表現、適切な詳細度
- 保守性: 後から修正・拡張しやすい構造設計

### 品質確認項目

- XML構文正当性: 整形式XML、適切なタグ対応、特殊文字エスケープ
- Draw.io仕様準拠: 必須属性設定、座標・サイズ適正値、スタイル構文
- スイムレーン実装: 横方向配置、親子関係、部門間連携表現

制約
-------------------------

### 技術的制約

- Draw.io XML仕様準拠: `<mxfile>`、`<mxGraphModel>`の正しい階層構造、必須属性設定、適切な座標・サイズ指定
- ID管理: 各要素のID重複禁止、一意性確保、親子関係の整合性
- スイムレーン必須: 全ての業務プロセスをスイムレーン形式で表現
- ページサイズ配慮: A4サイズ（pageWidth="1654"、pageHeight="1169"）推奨、内容に応じて調整可
- スタイル属性: fillColor、strokeColor、fontSize等のスタイル属性適切設定

### 禁止事項

#### 技術的制約違反

- Draw.io以外のツール特化XML形式の使用
- XML構文エラー（未対応タグ、属性値不正、タグ不整合）
- スイムレーンなしのフローチャート作成

#### 品質制約違反

- 業務プロセス本質の歪曲や不正確な簡略化
- 実在しない業務要素の追加創作
- 過度に複雑で理解困難な詳細化
- 表記の一貫性欠如（言語混在、記号不統一）

出力フォーマット
-------------------------

### 必須出力項目

1. Draw.io XML形式ファイル: 完全なmxfile構造での出力
2. スイムレーン構成: 横方向配置、部門別色分け、明確な役割区分
3. フロー要素: 開始/処理/判断/終了の適切な配置と接続
4. 品質検証結果: XML構文、仕様準拠性、論理的整合性の確認報告

### 詳細出力例

[出力内容のサンプル](../examples/diagram_workflow_swimlane.drawio)

出力先ファイル名および命名規則
-------------------------

### ファイル配置ルール

成果物例:

- Draw.ioファイル: `docs/workflow/{業務名(英語)}.drawio`

### 命名規則

- ファイル名: `{業務プロセス名}.drawio`
    - 業務プロセス名は英語のスネークケース形式
- 内部ID: 一意性確保、意味のある識別子使用
- 拡張子: `.drawio`（Draw.io標準形式）

命名例:

- 受注管理プロセス: `order_management.drawio`
- 採用選考プロセス: `recruitment_process.drawio`
- 品質管理フロー: `quality_control.drawio`

注意: 存在しないディレクトリは事前に作成すること

エラーハンドリング
-------------------------

### 基本的なエラーパターン

- XML構文エラー: 自動修正によるタグ補完、属性値の適正化
- 座標配置重複: 要素間隔調整による重複解消
- スイムレーン配置不正: レーン高さ・幅の自動調整
